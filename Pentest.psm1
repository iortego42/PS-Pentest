function Prompt {
    $SearchPath = '.',"$WorkSpace","$env:HOME/.local"
    $PromptString = "$($executionContext.SessionState.Path.CurrentLocation) " 
    $TargetIp = ""
    $TargetDomain = ""
    if (Get-ChildItem -Path $SearchPath -Filter .target.txt -Hidden)
    {
        $TargetIp = (Get-ChildItem -Path $SearchPath -Filter .target.txt -Hidden | select-object @{Name="path";expression={"$($_.DirectoryName)/.target.txt"}}).path | ForEach-Object {Get-Content $_} | Where-Object {$_.length -ne 0}  | Select-Object -First 1
    }
    if (Get-ChildItem -Path $SearchPath -Filter .dn.txt -Hidden)
    {
        $TargetDomain = (Get-ChildItem -Path $SearchPath -Filter .target.txt -Hidden | select-object @{Name="path";expression={"$($_.DirectoryName)/.dn.txt"}}).path | ForEach-Object {Get-Content $_} | Where-Object {$_.length -ne 0} | Select-Object -First 1
    }
    if ( $TargetIp ) {
        $PromptString += "󰓥 $TargetIp "
    }
    if ($TargetDomain) {
        $PromptString += "󰇗 $TargetDomain "
    }
    Write-Output "$PromptString> "   
}

function Set-TargetIp {
    param (
        [Parameter(Mandatory, HelpMessage = "Please, provide a valid Ip Address")]
        $TargetIp,
        [switch] 
        $SetLocalTargetIp
    )
    $TargetIpFile = "$env:HOME/.local/.target.txt"
    if ($SetLocalTargetIp)
    {
        $TargetIpFile = './.target.txt'
    }
    Write-Output $TargetIp | Out-File $TargetIpFile 
}

function Set-TargetDomain {
    param (
        [Parameter(Mandatory, HelpMessage = "Please, provide a valid Domain")]
        $TargetDomain,
        [switch] 
        $SetLocalTargetDomain
    )
    $TargetDomainFile = "$env:HOME/.local/.target.txt"
    if ($SetLocalTargetDomain)
    {
        $TargetDomainFile = './.dn.txt'
    }
    Write-Output $TargetDomain | Out-File $TargetDomainFile 
}